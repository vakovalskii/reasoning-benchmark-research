# LLM Reasoning Benchmark Research üß†

[![GitHub Pages](https://img.shields.io/badge/docs-GitHub%20Pages-blue)](https://vakovalskii.github.io/reasoning-benchmark-research/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)

**Comprehensive study of 5 reasoning approaches on SQuAD dataset**

–ù–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π –Ω–∞ –¥–∞—Ç–∞—Å–µ—Ç–µ SQuAD v1.1 —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –≤–ª–∏—è–Ω–∏–µ reasoning (—Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π) –Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å –∏ —Å–∫–æ—Ä–æ—Å—Ç—å.

üìñ **[Read Full Research on GitHub Pages ‚Üí](https://vakovalskii.github.io/reasoning-benchmark-research/)**

---

## üöÄ Quick Start

```bash
# Clone repository
git clone git@github.com:vakovalskii/reasoning-benchmark-research.git
cd reasoning-benchmark-research

# Install dependencies
pip install -r requirements.txt

# Configure API credentials
cp config.py.example config.py
# Edit config.py with your API key and endpoint

# Download SQuAD dataset
python download_squad.py

# Run benchmarks
cd without_reasoning && python test_squad_without_reasoning.py
cd ../with_structured_output && python test_squad_with_so.py
cd ../with_two_step_so && python test_squad_two_step_so.py
cd ../with_react && python test_squad_with_reasoning.py
cd ../with_react_two_tools && python test_squad_react_two_tools.py
```

---

## üéØ –¶–µ–ª—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

–°—Ä–∞–≤–Ω–∏—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é **reasoning (—Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π)** –≤ —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª—è—Ö –¥–ª—è –∑–∞–¥–∞—á–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –ú—ã —Ç–µ—Å—Ç–∏—Ä—É–µ–º –¥–≤–µ –∫–ª—é—á–µ–≤—ã–µ –≥–∏–ø–æ—Ç–µ–∑—ã:

1. **–Ø–≤–Ω–æ–µ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º —É–ª—É—á—à–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å**
2. **–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**

### –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –ø–æ–¥—Ö–æ–¥—ã:

1. **Without Reasoning (Baseline)**
   - –ú–æ–¥–µ–ª—å —Å—Ä–∞–∑—É –æ—Ç–≤–µ—á–∞–µ—Ç –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π
   - –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –ø–æ–¥—Ö–æ–¥
   - –ë–∞–∑–æ–≤–∞—è –ª–∏–Ω–∏—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

2. **Single-Step Structured Output (SO)**
   - –ú–æ–¥–µ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `reasoning` –∏ `answer` –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ JSON schema
   - –†–∞—Å—Å—É–∂–¥–µ–Ω–∏—è –∏ –æ—Ç–≤–µ—Ç –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ
   - **–ü—Ä–æ–≤–µ—Ä—è–µ–º:** –ø–æ–º–æ–≥–∞–µ—Ç –ª–∏ SO —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –º—ã—à–ª–µ–Ω–∏–µ?
   - **–ü—Ä–æ–≤–µ—Ä—è–µ–º:** –º–µ—à–∞–µ—Ç –ª–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è reasoning + answer?

3. **Two-Step Structured Output**
   - –®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è `reasoning` —á–µ—Ä–µ–∑ SO
   - –®–∞–≥ 2: Reasoning –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç (assistant role), –º–æ–¥–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç **—Å–≤–æ–±–æ–¥–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º**
   - **–ü—Ä–æ–≤–µ—Ä—è–µ–º:** –ø–æ–º–æ–≥–∞–µ—Ç –ª–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –¥–≤–∞ —à–∞–≥–∞?
   - **–ü—Ä–æ–≤–µ—Ä—è–µ–º:** –ª—É—á—à–µ –ª–∏ free-form answer, —á–µ–º SO answer?

4. **ReAct (Function Calling - Single Tool)**
   - –®–∞–≥ 1: –ú–æ–¥–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `generate_reasoning`
   - –®–∞–≥ 2: –ù–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–¥–µ–ª—å –∏–∑–≤–ª–µ–∫–∞–µ—Ç –æ—Ç–≤–µ—Ç **—Å–≤–æ–±–æ–¥–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º**
   - **–ü—Ä–æ–≤–µ—Ä—è–µ–º:** –¥–∞–µ—Ç –ª–∏ tool-based reasoning –ª—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã?
   - **–ü—Ä–æ–≤–µ—Ä—è–µ–º:** –≤–ª–∏—è–µ—Ç –ª–∏ –∞–≥–µ–Ω—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ?

5. **ReAct Two Tools (Function Calling - Two Tools)**
   - –®–∞–≥ 1: –ú–æ–¥–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç `generate_reasoning(reasoning: str)`
   - –®–∞–≥ 2: –ú–æ–¥–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç `submit_answer(answer: str)`
   - **–ü—Ä–æ–≤–µ—Ä—è–µ–º:** –ª—É—á—à–µ –ª–∏ –∏–∑–≤–ª–µ–∫–∞—Ç—å answer —á–µ—Ä–µ–∑ tool call, —á–µ–º free-form?
   - **–ü—Ä–æ–≤–µ—Ä—è–µ–º:** –≤–ª–∏—è–µ—Ç –ª–∏ —è–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å?

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:

**–û reasoning:**
- ‚ùì **–£–ª—É—á—à–∞–µ—Ç –ª–∏ reasoning —Ç–æ—á–Ω–æ—Å—Ç—å?** –ù–∞ —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤?
- ‚ùì **–ö–∞–∫–æ–π —Å–ø–æ—Å–æ–± reasoning –ª—É—á—à–µ?** SO vs Function Calling?

**–û —Å–ø–æ—Å–æ–±–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞:**
- ‚ùì **Free-form vs Structured Output –¥–ª—è answer?** –ß—Ç–æ —Ç–æ—á–Ω–µ–µ?
- ‚ùì **–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è vs —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ?** –ú–µ—à–∞–µ—Ç –ª–∏ SO –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ answer?
- ‚ùì **Tool call –¥–ª—è answer vs free-form?** –î–∞–µ—Ç –ª–∏ —è–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ?

**–û trade-offs:**
- ‚ùì **–ö–∞–∫–æ–π —Ü–µ–Ω–æ–π?** –ö–∞–∫ –º–µ–Ω—è–µ—Ç—Å—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å?
- ‚ùì **–°—Ç–æ–∏—Ç –ª–∏ –æ–Ω–æ —Ç–æ–≥–æ?** –û–ø—Ä–∞–≤–¥—ã–≤–∞–µ—Ç –ª–∏ –ø—Ä–∏—Ä–æ—Å—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–æ—Ç–µ—Ä—é —Å–∫–æ—Ä–æ—Å—Ç–∏?

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

**SQuAD (Stanford Question Answering Dataset)** - —ç—Ç–æ –∑–∞–¥–∞—á–∞ **–∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** (Reading Comprehension).

### –ß—Ç–æ –¥–æ–ª–∂–Ω–∞ –¥–µ–ª–∞—Ç—å –º–æ–¥–µ–ª—å:

**–î–∞–Ω–æ:**
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç** - –ø–∞—Ä–∞–≥—Ä–∞—Ñ —Ç–µ–∫—Å—Ç–∞
- **–í–æ–ø—Ä–æ—Å** - –≤–æ–ø—Ä–æ—Å –ø–æ —ç—Ç–æ–º—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- –ù–∞–π—Ç–∏ —Ç–æ—á–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–¥–æ—Å–ª–æ–≤–Ω–æ–π —Ü–∏—Ç–∞—Ç–æ–π** –∏–∑ —Ç–µ–∫—Å—Ç–∞ (–Ω–µ –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞—Ç—å!)

### –ü—Ä–∏–º–µ—Ä:

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
```
The Panthers used the San Jose State practice facility and stayed at the 
San Jose Marriott. The Broncos practiced at Stanford University and stayed 
at the Santa Clara Marriott.
```

**–í–æ–ø—Ä–æ—Å:**
```
Which hotel did the Broncos use for Super Bowl 50?
```

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:**
```
Santa Clara Marriott
```

### –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç –º–æ–¥–µ–ª–∏:

1. **–ü–æ–Ω—è—Ç—å –≤–æ–ø—Ä–æ—Å** - —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç
2. **–ù–∞–π—Ç–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é —á–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** - –≥–¥–µ —É–ø–æ–º–∏–Ω–∞—é—Ç—Å—è Broncos –∏ –æ—Ç–µ–ª—å
3. **–ò–∑–≤–ª–µ—á—å —Ç–æ—á–Ω—ã–π –æ—Ç–≤–µ—Ç** - "Santa Clara Marriott" (–¥–æ—Å–ª–æ–≤–Ω–æ –∏–∑ —Ç–µ–∫—Å—Ç–∞)
4. **–ù–ï –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å** - –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ—á–Ω–æ–π —Ü–∏—Ç–∞—Ç–æ–π

---

## üí¨ –ü—Ä–æ–º–ø—Ç—ã (–Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –ø—Ä–æ—Å—Ç—ã–µ)

**–í–∞–∂–Ω–æ:** –í—Å–µ –ø—Ä–æ–º–ø—Ç—ã –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–µ –∏ **–Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π** –¥–ª—è –∑–∞–¥–∞—á–∏ SQuAD. –ú—ã —Ç–µ—Å—Ç–∏—Ä—É–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –ø–æ–Ω–∏–º–∞—Ç—å –∑–∞–¥–∞—á—É –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –∞ –Ω–µ —Å–ª–µ–¥–æ–≤–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º.

### 1. Without Reasoning

**System:**
```
You are a helpful assistant. Answer the question based on the given context.
```

**User:**
```
Context: {context}

Question: {question}

Answer:
```

### 2. With Structured Output (Single-Step)

**System:**
```
You are a helpful assistant. Answer questions based on the given context.
```

**User:**
```
Context: {context}

Question: {question}

Think step-by-step, then provide the exact answer from the context.
```

**JSON Schema:**
```json
{
  "reasoning": "Step-by-step analysis of where the answer is in the context",
  "answer": "The exact answer extracted from the context"
}
```

### 3. With Two-Step SO

**Step 1 - System:**
```
You are a helpful assistant. Analyze the context to find where the answer is located.
```

**Step 1 - User:**
```
Context: {context}

Question: {question}

Think step-by-step about where the answer is in the context.
```

**Step 2 - Assistant:** `{reasoning from step 1}`

**Step 2 - User:**
```
Based on your analysis, extract the exact answer from the context.
```

### 4. With ReAct (Function Calling)

**System:**
```
You are a helpful assistant. Use the generate_reasoning tool to think step-by-step, 
then provide the final answer.
```

**User:**
```
Context: {context}

Question: {question}

First, use the generate_reasoning tool to analyze where the answer is in the context. 
Then extract the exact answer.
```

**Tool Definition:**
```json
{
  "name": "generate_reasoning",
  "description": "Generate step-by-step reasoning to find the answer in the context",
  "parameters": {
    "reasoning": "Step-by-step analysis of where the answer is in the context"
  }
}
```

**–ö–ª—é—á–µ–≤–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ:** –ü—Ä–æ–º–ø—Ç—ã –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç:
- ‚ùå –£–ø–æ–º–∏–Ω–∞–Ω–∏—è "SQuAD"
- ‚ùå –î–µ—Ç–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—é –æ—Ç–≤–µ—Ç–æ–≤
- ‚ùå –ü—Ä–∏–º–µ—Ä–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- ‚ùå –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–π
- ‚úÖ –¢–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: "answer based on context" –∏ "extract exact answer"

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
reasoning_benchmark/
‚îú‚îÄ‚îÄ config.py                          # –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ squad_data/                        # –î–∞–Ω–Ω—ã–µ SQuAD
‚îÇ   ‚îú‚îÄ‚îÄ train.json
‚îÇ   ‚îî‚îÄ‚îÄ validation.json
‚îú‚îÄ‚îÄ without_reasoning/                 # –¢–µ—Å—Ç—ã –±–µ–∑ reasoning
‚îÇ   ‚îú‚îÄ‚îÄ test_squad_without_reasoning.py
‚îÇ   ‚îî‚îÄ‚îÄ results/                       # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ with_structured_output/            # –¢–µ—Å—Ç—ã —Å SO (1 —à–∞–≥: reasoning + answer)
‚îÇ   ‚îú‚îÄ‚îÄ test_squad_with_so.py
‚îÇ   ‚îî‚îÄ‚îÄ results/                       # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ with_two_step_so/                  # –¢–µ—Å—Ç—ã —Å Two-Step SO
‚îÇ   ‚îú‚îÄ‚îÄ test_squad_two_step_so.py
‚îÇ   ‚îî‚îÄ‚îÄ results/                       # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
‚îî‚îÄ‚îÄ with_react/                        # –¢–µ—Å—Ç—ã —Å ReAct (Function Calling)
    ‚îú‚îÄ‚îÄ test_squad_with_reasoning.py
    ‚îî‚îÄ‚îÄ results/                       # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `config.py`:

- **API Configuration**: `API_KEY`, `BASE_URL`, `MODEL`
- **Model Parameters**: `TEMPERATURE`, `MAX_TOKENS_*`
- **Benchmark Parameters**: `MAX_WORKERS`, `NUM_QUESTIONS`
- **Timeout Settings**: `REQUEST_TIMEOUT`, `MAX_RETRIES`, `RETRY_DELAY`

## –ü–æ–¥—Ö–æ–¥—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### 1. Without Reasoning
**–ü–∞–ø–∫–∞**: `without_reasoning/`

–ü—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Ö–æ–¥: –º–æ–¥–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –≤–æ–ø—Ä–æ—Å, —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç.

```bash
cd without_reasoning
python test_squad_without_reasoning.py
```

### 2. With Structured Output (Single-Step)
**–ü–∞–ø–∫–∞**: `with_structured_output/`

–û–¥–Ω–æ—à–∞–≥–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ —Å JSON schema:
- –ú–æ–¥–µ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `reasoning` –∏ `answer` –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ —á–µ—Ä–µ–∑ Structured Output

```bash
cd with_structured_output
python test_squad_with_so.py
```

### 3. With Two-Step Structured Output
**–ü–∞–ø–∫–∞**: `with_two_step_so/`

–î–≤—É—Ö—à–∞–≥–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ —Å JSON schema:
1. **–®–∞–≥ 1**: –ú–æ–¥–µ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `reasoning` —á–µ—Ä–µ–∑ Structured Output
2. **–®–∞–≥ 2**: `reasoning` –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ `assistant` role, –º–æ–¥–µ–ª—å –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –∫–∞–∫ free-form content

```bash
cd with_two_step_so
python test_squad_two_step_so.py
```

### 4. With ReAct (Function Calling)
**–ü–∞–ø–∫–∞**: `with_react/`

–ê–≥–µ–Ω—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Function Calling:
1. **–®–∞–≥ 1**: –ú–æ–¥–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç tool `generate_reasoning` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
2. **–®–∞–≥ 2**: –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ tool, –º–æ–¥–µ–ª—å –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç

```bash
cd with_react
python test_squad_with_reasoning.py
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Å–≤–æ–µ–π –ø–∞–ø–∫–µ `results/`:
- **JSONL —Ñ–∞–π–ª—ã**: –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (–¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞ –ª–µ—Ç—É)
- **Summary —Ñ–∞–π–ª—ã**: –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é —Ç–µ—Å—Ç–∞

### –ú–µ—Ç—Ä–∏–∫–∏

- **Accuracy (EMIN)**: Exact Match In - –ø—Ä–æ–≤–µ—Ä–∫–∞, —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ –º–æ–¥–µ–ª–∏
- **Response Time**: –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å
- **Throughput**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
- **Questions/Second**: –°–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–µ–Ω—á–º–∞—Ä–∫–æ–≤

**–î–∞—Ç–∞—Å–µ—Ç**: SQuAD v1.1 Validation (10,570 –≤–æ–ø—Ä–æ—Å–æ–≤)  
**–ú–æ–¥–µ–ª—å**: qwen3-30b-a3b-instruct-2507  
**–ú–µ—Ç—Ä–∏–∫–∞**: EMIN (Exact Match In) - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –≤ –æ—Ç–≤–µ—Ç–µ –º–æ–¥–µ–ª–∏  
**–î–∞—Ç–∞**: 28 –¥–µ–∫–∞–±—Ä—è 2024

### –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| # | –ü–æ–¥—Ö–æ–¥ | Accuracy | Correct | Incorrect | Speed (q/s) | Avg Response | Total Time | –°—Ç–∞—Ç—É—Å |
|---|--------|----------|---------|-----------|-------------|--------------|------------|--------|
| 1 | **Without Reasoning** | **89.37%** | 9,446 | 1,124 | **15.00** | **2.00s** | **11.7 min** | ‚úÖ |
| 2 | **Single-Step SO** | **90.98%** | 9,617 | 953 | 4.62 | 6.42s | 38.1 min | ‚úÖ |
| 3 | **Two-Step SO** | **üèÜ 93.47%** | **9,880** | **690** | 2.64 | 11.35s | 66.7 min | ‚úÖ |
| 4 | **ReAct (1 Tool)** | **91.98%** | 9,722 | 848 | 3.45 | 8.68s | 51.0 min | ‚úÖ |
| 5 | **ReAct (2 Tools)** | **ü•à 93.27%** | **9,859** | **711** | 3.31 | 9.04s | 53.2 min | ‚úÖ |

### –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

#### 1. Without Reasoning (Baseline)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä—è–º–æ–π –æ—Ç–≤–µ—Ç –±–µ–∑ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π
- **Accuracy**: 89.37%
- **–°–∫–æ—Ä–æ—Å—Ç—å**: 15.00 q/s (—Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π)
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: 2.00s (—Å–∞–º–æ–µ –±—ã—Å—Ç—Ä–æ–µ)
- **–û–±—â–µ–µ –≤—Ä–µ–º—è**: 11.7 –º–∏–Ω—É—Ç
- **–ü–ª—é—Å—ã**: ‚ö° –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å, –Ω–∏–∑–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
- **–ú–∏–Ω—É—Å—ã**: ‚ö†Ô∏è –ù–∞–∏–º–µ–Ω—å—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å

#### 2. Single-Step SO
- **–û–ø–∏—Å–∞–Ω–∏–µ**: Reasoning + answer –≤ –æ–¥–Ω–æ–º JSON —á–µ—Ä–µ–∑ Structured Output
- **Accuracy**: 90.98%
- **–°–∫–æ—Ä–æ—Å—Ç—å**: 4.62 q/s
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: 6.42s
- **–û–±—â–µ–µ –≤—Ä–µ–º—è**: 38.1 –º–∏–Ω—É—Ç
- **–ü–ª—é—Å—ã**: üìä –°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å (+1.61% vs baseline), —Å—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å
- **–ú–∏–Ω—É—Å—ã**: ‚ö†Ô∏è –£—Å—Ç—É–ø–∞–µ—Ç Two-Step SO –∏ ReAct

#### 3. Two-Step SO üèÜ
- **–û–ø–∏—Å–∞–Ω–∏–µ**: Reasoning —á–µ—Ä–µ–∑ SO, –∑–∞—Ç–µ–º reasoning –≤ assistant role + free-form answer
- **Accuracy**: 93.47% (–ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!)
- **–°–∫–æ—Ä–æ—Å—Ç—å**: 2.64 q/s (—Å–∞–º—ã–π –º–µ–¥–ª–µ–Ω–Ω—ã–π)
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: 11.35s (—Å–∞–º–æ–µ –¥–æ–ª–≥–æ–µ)
- **–û–±—â–µ–µ –≤—Ä–µ–º—è**: 66.7 –º–∏–Ω—É—Ç
- **–ü–ª—é—Å—ã**: üèÜ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å (+4.10% vs baseline), —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ reasoning –∏ answer
- **–ú–∏–Ω—É—Å—ã**: üêå –°–∞–º—ã–π –º–µ–¥–ª–µ–Ω–Ω—ã–π (–≤ 5.7 —Ä–∞–∑ –º–µ–¥–ª–µ–Ω–Ω–µ–µ baseline)

#### 4. ReAct (1 Tool - Function Calling)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–æ–¥–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç `generate_reasoning`, –∑–∞—Ç–µ–º –æ—Ç–≤–µ—á–∞–µ—Ç free-form
- **Accuracy**: 91.98%
- **–°–∫–æ—Ä–æ—Å—Ç—å**: 3.45 q/s
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: 8.68s
- **–û–±—â–µ–µ –≤—Ä–µ–º—è**: 51.0 –º–∏–Ω—É—Ç
- **–ü–ª—é—Å—ã**: ü§ñ –ê–≥–µ–Ω—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥, —Ö–æ—Ä–æ—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- **–ú–∏–Ω—É—Å—ã**: ‚ö†Ô∏è –£—Å—Ç—É–ø–∞–µ—Ç –ø–æ–¥—Ö–æ–¥–∞–º —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º reasoning/answer

#### 5. ReAct (2 Tools) ü•à
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–æ–¥–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç `generate_reasoning`, –∑–∞—Ç–µ–º `submit_answer`
- **Accuracy**: 93.27% (–≤—Ç–æ—Ä–æ–π –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!)
- **–°–∫–æ—Ä–æ—Å—Ç—å**: 3.31 q/s
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: 9.04s
- **–û–±—â–µ–µ –≤—Ä–µ–º—è**: 53.2 –º–∏–Ω—É—Ç
- **–ü–ª—é—Å—ã**: üèÖ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å (+3.90% vs baseline), —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π answer
- **–ú–∏–Ω—É—Å—ã**: üêå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ baseline –≤ 4.5 —Ä–∞–∑

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

#### üéØ –ì–ª–∞–≤–Ω—ã–µ –æ—Ç–∫—Ä—ã—Ç–∏—è

**1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ reasoning –∏ answer –∫—Ä–∏—Ç–∏—á–Ω–æ!**

–¢–æ–ø-2 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –¥–≤–∞ —à–∞–≥–∞**:
- üèÜ **Two-Step SO (93.47%)**: reasoning —á–µ—Ä–µ–∑ SO ‚Üí free-form answer
- ü•à **ReAct 2 Tools (93.27%)**: reasoning —á–µ—Ä–µ–∑ tool ‚Üí answer —á–µ—Ä–µ–∑ tool

–û–±–∞ –æ–±–æ–≥–Ω–∞–ª–∏ –ø–æ–¥—Ö–æ–¥—ã —Å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏–ª–∏ –æ–¥–Ω–∏–º tool call.

**2. –°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è answer –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ!**

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º reasoning –ø–æ–¥—Ö–æ–¥–µ:
- **ReAct 1 Tool** (free-form answer): 91.98%
- **ReAct 2 Tools** (tool call answer): 93.27% (+1.29%)

–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π answer —á–µ—Ä–µ–∑ tool –¥–∞–µ—Ç –ø—Ä–∏—Ä–æ—Å—Ç!

#### –¢–æ—á–Ω–æ—Å—Ç—å vs –°–∫–æ—Ä–æ—Å—Ç—å

**–ü—Ä–∏—Ä–æ—Å—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏ –æ—Ç reasoning:**
- **Single-Step SO**: +1.61% (171 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤)
- **ReAct (1 Tool)**: +2.61% (276 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤)
- **ReAct (2 Tools)**: +3.90% (413 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤) ü•à
- **Two-Step SO**: +4.10% (434 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤) üèÜ

**–¶–µ–Ω–∞ –∑–∞ —Ç–æ—á–Ω–æ—Å—Ç—å:**
- **Single-Step SO**: –≤ 3.2 —Ä–∞–∑–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ baseline (15.0 ‚Üí 4.62 q/s)
- **ReAct (1 Tool)**: –≤ 4.3 —Ä–∞–∑–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ baseline (15.0 ‚Üí 3.45 q/s)
- **ReAct (2 Tools)**: –≤ 4.5 —Ä–∞–∑ –º–µ–¥–ª–µ–Ω–Ω–µ–µ baseline (15.0 ‚Üí 3.31 q/s)
- **Two-Step SO**: –≤ 5.7 —Ä–∞–∑ –º–µ–¥–ª–µ–Ω–Ω–µ–µ baseline (15.0 ‚Üí 2.64 q/s)

**–õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:**
- Baseline: 2.00s
- Single-Step SO: 6.42s (3.2x)
- ReAct (1 Tool): 8.68s (4.3x)
- ReAct (2 Tools): 9.04s (4.5x)
- Two-Step SO: 11.35s (5.7x)

#### üí° –ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã

**1. Reasoning —Ä–∞–±–æ—Ç–∞–µ—Ç!**
- –í—Å–µ –ø–æ–¥—Ö–æ–¥—ã —Å reasoning –ø–æ–∫–∞–∑–∞–ª–∏ –ª—É—á—à—É—é —Ç–æ—á–Ω–æ—Å—Ç—å, —á–µ–º baseline
- –ü—Ä–∏—Ä–æ—Å—Ç –æ—Ç +1.61% –¥–æ +4.10%
- 434 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞ –∏–∑ 10,570

**2. –°–ø–æ—Å–æ–± –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ reasoning –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ**
```
Single-Step SO (90.98%) < ReAct (91.98%) < Two-Step SO (93.47%)
```

**–ü–æ—á–µ–º—É Two-Step SO –ª—É—á—à–µ:**
- ‚úÖ Reasoning –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ (—á–µ—Ä–µ–∑ SO)
- ‚úÖ Answer –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º (–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π SO)
- ‚úÖ –ú–æ–¥–µ–ª—å "–≤–∏–¥–∏—Ç" —Å–≤–æ–∏ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º
- ‚úÖ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –º–µ–∂–¥—É "–¥—É–º–∞—Ç—å" –∏ "—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å" –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

**–ü–æ—á–µ–º—É Single-Step SO —Ö—É–∂–µ:**
- ‚ùå –ú–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞—Å—Å—É–∂–¥–∞—Ç—å –ò —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç –≤ JSON
- ‚ùå SO –º–æ–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
- ‚ùå –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∑–∞–¥–∞—á: "–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å" vs "—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å"

**–ü–æ—á–µ–º—É ReAct (1 Tool) –Ω–∞ 4-–º –º–µ—Å—Ç–µ:**
- ‚úÖ –Ø–≤–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ reasoning (tool call) –∏ answer
- ‚ö†Ô∏è Free-form answer –º–µ–Ω–µ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω
- ‚ö†Ô∏è –ú–æ–¥–µ–ª—å –º–æ–∂–µ—Ç "–∑–∞–±—ã—Ç—å" –¥–µ—Ç–∞–ª–∏ reasoning –ø—Ä–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ

**–ü–æ—á–µ–º—É ReAct (2 Tools) –Ω–∞ 2-–º –º–µ—Å—Ç–µ:**
- ‚úÖ –Ø–≤–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ reasoning –∏ answer —á–µ—Ä–µ–∑ tool calls
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π answer —á–µ—Ä–µ–∑ `submit_answer` tool
- ‚úÖ –ú–æ–¥–µ–ª—å "–≤–∏–¥–∏—Ç" reasoning –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –≤—Ç–æ—Ä–æ–≥–æ tool
- ‚ö†Ô∏è –ù–µ–º–Ω–æ–≥–æ —É—Å—Ç—É–ø–∞–µ—Ç Two-Step SO (–≤–æ–∑–º–æ–∂–Ω–æ, –∏–∑-–∑–∞ overhead tool calls)

**3. Trade-off: —Ç–æ—á–Ω–æ—Å—Ç—å vs —Å–∫–æ—Ä–æ—Å—Ç—å**
- –ó–∞ –∫–∞–∂–¥—ã–π +1% —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç–∏–º ~1.4x –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ–º
- Two-Step SO: +4.10% —Ç–æ—á–Ω–æ—Å—Ç–∏ –∑–∞ 5.7x –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ
- –î–ª—è production –Ω—É–∂–µ–Ω –±–∞–ª–∞–Ω—Å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–¥–∞—á–∏

**4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –≤—ã–≤–æ–¥—ã**
- üîë **–†–∞–∑–¥–µ–ª—è–π—Ç–µ "–¥—É–º–∞—Ç—å" –∏ "–æ—Ç–≤–µ—á–∞—Ç—å"** - —ç—Ç–æ –¥–∞–µ—Ç –ª—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (+1.29% - +4.10%)
- üîë **–î–≤–∞ –ª—É—á—à–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–∞:**
  - SO –¥–ª—è reasoning ‚Üí free-form answer (93.47%)
  - Tool –¥–ª—è reasoning ‚Üí tool –¥–ª—è answer (93.27%)
- üîë **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π answer –ª—É—á—à–µ free-form** - —Å—Ä–∞–≤–Ω–∏—Ç–µ ReAct 1 vs 2 Tools (+1.29%)
- üîë **–ö–æ–Ω—Ç–µ–∫—Å—Ç —Å reasoning –∫—Ä–∏—Ç–∏—á–µ–Ω** - –º–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ "–≤–∏–¥–µ—Ç—å" —Å–≤–æ–∏ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è
- üîë **–ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–æ–º–ø—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç** - –Ω–µ –Ω—É–∂–Ω—ã —Å–ª–æ–∂–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

**5. –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**
- ‚ùó **Two-Step SO > ReAct 2 Tools** (93.47% vs 93.27%) - free-form answer —á—É—Ç—å –ª—É—á—à–µ tool call
- ‚ùó **ReAct 2 Tools > ReAct 1 Tool** (93.27% vs 91.98%) - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π answer –¥–∞–µ—Ç +1.29%
- ‚ùó **Single-Step SO —Ö—É–¥—à–∏–π —Å—Ä–µ–¥–∏ reasoning** (90.98%) - –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—à–∞–µ—Ç

---

## üìä –û—Ç–≤–µ—Ç—ã –Ω–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã

### –û reasoning:

**‚ùì –£–ª—É—á—à–∞–µ—Ç –ª–∏ reasoning —Ç–æ—á–Ω–æ—Å—Ç—å? –ù–∞ —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤?**
‚úÖ **–î–ê!** –û—Ç +1.61% –¥–æ +4.10%
- Single-Step SO: +1.61% (171 –¥–æ–ø. –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞)
- ReAct 1 Tool: +2.61% (276 –¥–æ–ø. –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞)
- ReAct 2 Tools: +3.90% (413 –¥–æ–ø. –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞)
- Two-Step SO: +4.10% (434 –¥–æ–ø. –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞) üèÜ

**‚ùì –ö–∞–∫–æ–π —Å–ø–æ—Å–æ–± reasoning –ª—É—á—à–µ? SO vs Function Calling?**
‚úÖ **–û–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç —Ö–æ—Ä–æ—à–æ, –Ω–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É:**
- SO (Two-Step): 93.47% - –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- Function Calling (2 Tools): 93.27% - –æ—á–µ–Ω—å –±–ª–∏–∑–∫–æ
- –†–∞–∑–Ω–∏—Ü–∞: 0.20% (21 –≤–æ–ø—Ä–æ—Å –∏–∑ 10,570)

**–í—ã–≤–æ–¥:** –°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è reasoning –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω. –í–∞–∂–Ω–æ **—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –¥–≤–∞ —à–∞–≥–∞**.

### –û —Å–ø–æ—Å–æ–±–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞:

**‚ùì Free-form vs Structured Output –¥–ª—è answer? –ß—Ç–æ —Ç–æ—á–Ω–µ–µ?**
‚úÖ **Free-form –ù–ï–ú–ù–û–ì–û –ª—É—á—à–µ:**
- Two-Step SO (free-form answer): 93.47%
- ReAct 2 Tools (tool call answer): 93.27%
- –†–∞–∑–Ω–∏—Ü–∞: 0.20%

**–ü–æ—á–µ–º—É free-form –ª—É—á—à–µ?**
- –ú–æ–¥–µ–ª—å –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ —Ñ–æ—Ä–º–∞—Ç–æ–º JSON
- –ú–æ–∂–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å —Ñ—Ä–∞–∑—ã –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ù–µ—Ç overhead –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

**‚ùì –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è vs —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ? –ú–µ—à–∞–µ—Ç –ª–∏ SO –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ answer?**
‚úÖ **–î–ê, –º–µ—à–∞–µ—Ç!**
- Single-Step SO (–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ): 90.98%
- Two-Step SO (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ): 93.47%
- –†–∞–∑–Ω–∏—Ü–∞: +2.49% –æ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è!

**–ü–æ—á–µ–º—É –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ö—É–∂–µ?**
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∑–∞–¥–∞—á: "–¥—É–º–∞—Ç—å" vs "—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å"
- –ú–æ–¥–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –¥–≤–∞ –¥–µ–ª–∞ —Å—Ä–∞–∑—É
- JSON –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ –æ—Ç–≤–µ—Ç–∞—Ö ("} 4", "} 7 {")

**‚ùì Tool call –¥–ª—è answer vs free-form? –î–∞–µ—Ç –ª–∏ —è–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ?**
‚úÖ **–î–∞, –Ω–æ –ù–ï–ë–û–õ–¨–®–û–ï:**
- ReAct 2 Tools (tool call): 93.27%
- ReAct 1 Tool (free-form): 91.98%
- –†–∞–∑–Ω–∏—Ü–∞: +1.29%

**–ù–û:** Free-form –ø–æ—Å–ª–µ SO reasoning –µ—â–µ –ª—É—á—à–µ (93.47%)

### –û trade-offs:

**‚ùì –ö–∞–∫–æ–π —Ü–µ–Ω–æ–π? –ö–∞–∫ –º–µ–Ω—è–µ—Ç—Å—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å?**
‚úÖ **–ß–µ–º –≤—ã—à–µ —Ç–æ—á–Ω–æ—Å—Ç—å, —Ç–µ–º –º–µ–¥–ª–µ–Ω–Ω–µ–µ:**

| –ü–æ–¥—Ö–æ–¥ | –¢–æ—á–Ω–æ—Å—Ç—å | –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ | –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å |
|--------|----------|------------|-------------|
| Without Reasoning | 89.37% | 1x | 2.00s |
| Single-Step SO | 90.98% | 3.2x | 6.42s |
| ReAct 1 Tool | 91.98% | 4.3x | 8.68s |
| ReAct 2 Tools | 93.27% | 4.5x | 9.04s |
| Two-Step SO | 93.47% | 5.7x | 11.35s |

**–§–æ—Ä–º—É–ª–∞:** –ó–∞ –∫–∞–∂–¥—ã–π +1% —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç–∏–º ~1.4x –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ–º

**‚ùì –°—Ç–æ–∏—Ç –ª–∏ –æ–Ω–æ —Ç–æ–≥–æ? –û–ø—Ä–∞–≤–¥—ã–≤–∞–µ—Ç –ª–∏ –ø—Ä–∏—Ä–æ—Å—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–æ—Ç–µ—Ä—é —Å–∫–æ—Ä–æ—Å—Ç–∏?**
‚úÖ **–ó–ê–í–ò–°–ò–¢ –û–¢ –ó–ê–î–ê–ß–ò:**

**–°—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å reasoning –∫–æ–≥–¥–∞:**
- ‚úÖ –ö—Ä–∏—Ç–∏—á–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å (–º–µ–¥–∏—Ü–∏–Ω–∞, —é—Ä–∏—Å–ø—Ä—É–¥–µ–Ω—Ü–∏—è, —Ñ–∏–Ω–∞–Ω—Å—ã)
- ‚úÖ –°—Ç–æ–∏–º–æ—Å—Ç—å –æ—à–∏–±–∫–∏ –≤—ã—Å–æ–∫–∞
- ‚úÖ –ù–∏–∑–∫–∞—è/—Å—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞
- ‚úÖ –ù—É–∂–Ω–∞ –ø—Ä–æ—Å–ª–µ–∂–∏–≤–∞–µ–º–æ—Å—Ç—å —Ä–µ—à–µ–Ω–∏–π

**–ù–ï —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å reasoning –∫–æ–≥–¥–∞:**
- ‚ùå –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (FAQ, —á–∞—Ç-–±–æ—Ç—ã)
- ‚ùå –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (—Ç—ã—Å—è—á–∏ –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫)
- ‚ùå –ü—Ä–æ—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã —Å —è–≤–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
- ‚ùå –î–æ–ø—É—Å—Ç–∏–º–∞ —Ç–æ—á–Ω–æ—Å—Ç—å ~89%

---

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω—ã–π –∏–Ω—Å–∞–π—Ç –¥–ª—è –∞–≥–µ–Ω—Ç–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞: Tool call –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å

**–ù–∞–±–ª—é–¥–µ–Ω–∏–µ –∏–∑ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞:**
```
ReAct 2 Tools (answer —á–µ—Ä–µ–∑ tool): 93.27%
Two-Step SO (answer free-form):    93.47%
–†–∞–∑–Ω–∏—Ü–∞: -0.20% –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ tool
```

### –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤?

**1. –ê–≥–µ–Ω—Ç–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ —á–∞—Å—Ç–æ —Ç—Ä–µ–±—É—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π output**
```python
# –¢–∏–ø–∏—á–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –≤ LangChain, AutoGPT, etc.
class Agent:
    tools = [
        {"name": "search", "output": SearchResult},
        {"name": "calculate", "output": CalculationResult},
        {"name": "final_answer", "output": FinalAnswer}  # ‚Üê –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π!
    ]
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ "–≤–ø–∏—Ö–Ω—É—Ç—å" –æ—Ç–≤–µ—Ç –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ.

**2. –ü—Ä–∏–º–µ—Ä—ã –∏–∑ –Ω–∞—à–µ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞:**

**–í–æ–ø—Ä–æ—Å:** "What is the position Derek Wolfe plays currently?"
- **Expected:** "Defensive ends"
- **ReAct 2 Tools (tool):** "defensive end" ‚ùå (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ)
- **Two-Step SO (free-form):** "Defensive ends" ‚úÖ

**–í–æ–ø—Ä–æ—Å:** "Which hotel did the Broncos use?"
- **Expected:** "Santa Clara Marriott."
- **ReAct 2 Tools (tool):** "Santa Clara Marriott" ‚ùå (–±–µ–∑ —Ç–æ—á–∫–∏)
- **Two-Step SO (free-form):** "Santa Clara Marriott." ‚úÖ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–Ω—ã—Ö —Å–∏—Å—Ç–µ–º:

**‚ùå –ù–ï –î–ï–õ–ê–ô–¢–ï –¢–ê–ö:**
```python
# –ü–ª–æ—Ö–æ: —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ tool —Å –∂–µ—Å—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
tools = [
    {"name": "think", "parameters": {"reasoning": "string"}},
    {"name": "answer", "parameters": {"answer": "string"}}  # ‚Üê –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç!
]
```

**‚úÖ –î–ï–õ–ê–ô–¢–ï –¢–ê–ö:**
```python
# –•–æ—Ä–æ—à–æ: reasoning —á–µ—Ä–µ–∑ tool, answer free-form
# –®–∞–≥ 1: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ reasoning
reasoning = agent.call_tool("analyze_context", {"reasoning": "..."})

# –®–∞–≥ 2: –°–≤–æ–±–æ–¥–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
messages.append({"role": "assistant", "content": reasoning})
messages.append({"role": "user", "content": "Now extract the exact answer."})
final_answer = agent.generate(messages)  # ‚Üê Free-form!
```

**üéØ –ò–õ–ò –ì–ò–ë–†–ò–î–ù–´–ô –ü–û–î–•–û–î:**
```python
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ tool –¥–ª—è reasoning, –Ω–æ –Ω–µ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
class SmartAgent:
    def process(self, task):
        # 1. Tool –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–æ)
        analysis = self.call_tool("analyze", task)
        
        # 2. Tool –¥–ª—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–æ)
        actions = self.call_tool("plan_actions", analysis)
        
        # 3. –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ë–ï–ó tool (—Å–≤–æ–±–æ–¥–Ω–æ)
        return self.generate_final_answer(task, analysis, actions)
```

### –í—ã–≤–æ–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∞–≥–µ–Ω—Ç–æ–≤:

1. **–ù–µ –∑–∞—Å—Ç–∞–≤–ª—è–π—Ç–µ –º–æ–¥–µ–ª—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π output**
   - Reasoning ‚Üí —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π—Ç–µ (SO –∏–ª–∏ tool)
   - Final answer ‚Üí –æ—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–±–æ–¥–Ω—ã–º

2. **Tool calls —Ö–æ—Ä–æ—à–∏ –¥–ª—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —à–∞–≥–æ–≤**
   - –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
   - –í—ã—á–∏—Å–ª–µ–Ω–∏—è
   - –ê–Ω–∞–ª–∏–∑
   - –ù–û –ù–ï –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

3. **–†–∞–∑–Ω–∏—Ü–∞ 0.20% –∫–∞–∂–µ—Ç—Å—è –º–∞–ª–æ–π, –Ω–æ:**
   - –ù–∞ 10,000 –∑–∞–ø—Ä–æ—Å–æ–≤ = 20 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫
   - –í –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö —ç—Ç–æ –≤–∞–∂–Ω–æ
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç —Å—Ç—Ä–∞–¥–∞–µ—Ç

4. **–ë–∞–ª–∞–Ω—Å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –≥–∏–±–∫–æ—Å—Ç–∏:**
   ```
   –í—ã—Å–æ–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (tool) ‚Üí –•–æ—Ä–æ—à–æ –¥–ª—è pipeline
   –ù–∏–∑–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (free-form) ‚Üí –•–æ—Ä–æ—à–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–∞
   ```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä:

```python
# ‚ùå –ü–ª–æ—Ö–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–≥–µ–Ω—Ç–∞
class RigidAgent:
    def answer_question(self, question):
        # –í—Å–µ —á–µ—Ä–µ–∑ tools - —Å–ª–∏—à–∫–æ–º –∂–µ—Å—Ç–∫–æ
        reasoning = self.call_tool("think", {"question": question})
        answer = self.call_tool("answer", {"answer": "..."})  # ‚Üê –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ!
        return answer

# ‚úÖ –•–æ—Ä–æ—à–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–≥–µ–Ω—Ç–∞  
class FlexibleAgent:
    def answer_question(self, question):
        # Reasoning —á–µ—Ä–µ–∑ tool (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–æ)
        reasoning = self.call_tool("think", {"question": question})
        
        # Answer —Å–≤–æ–±–æ–¥–Ω–æ (–≥–∏–±–∫–æ)
        context = self.build_context(question, reasoning)
        answer = self.llm.generate(context)  # ‚Üê –°–≤–æ–±–æ–¥–Ω–æ!
        
        return {
            "answer": answer,
            "reasoning": reasoning,  # –î–ª—è –ø—Ä–æ—Å–ª–µ–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏
            "confidence": self.estimate_confidence(answer)
        }
```

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É –ø–æ–¥—Ö–æ–¥–∞

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Without Reasoning –∫–æ–≥–¥–∞:**
- ‚ö° –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏
- üöÄ –ö—Ä–∏—Ç–∏—á–Ω–∞ –Ω–∏–∑–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
- ‚úÖ –î–æ–ø—É—Å—Ç–∏–º–∞ —Ç–æ—á–Ω–æ—Å—Ç—å ~89%
- üìà –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤)

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Single-Step SO –∫–æ–≥–¥–∞:**
- üìä –ù—É–∂–µ–Ω –±–∞–ª–∞–Ω—Å —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏
- ‚ö° –£–º–µ—Ä–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
- üí∞ –í–∞–∂–Ω–∞ —ç–∫–æ–Ω–æ–º–∏—è –Ω–∞ API calls (1 –∑–∞–ø—Ä–æ—Å vs 2)
- ‚úÖ –î–æ–ø—É—Å—Ç–∏–º–∞ —Ç–æ—á–Ω–æ—Å—Ç—å ~91%
- üèÉ –ù—É–∂–µ–Ω –±—ã—Å—Ç—Ä—ã–π reasoning (–±—ã—Å—Ç—Ä–µ–µ ReAct –∏ Two-Step)

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ReAct –∫–æ–≥–¥–∞:**
- ü§ñ –ù—É–∂–µ–Ω –∞–≥–µ–Ω—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–º–æ–¥–µ–ª—å —Å–∞–º–∞ —Ä–µ—à–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å reasoning)
- üîß –ï—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è function calling
- ‚öñÔ∏è –ù—É–∂–µ–Ω –±–∞–ª–∞–Ω—Å —Ç–æ—á–Ω–æ—Å—Ç–∏ (92%) –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ (–±—ã—Å—Ç—Ä–µ–µ Two-Step)
- üìä –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Two-Step SO –∫–æ–≥–¥–∞:**
- üèÜ –ö—Ä–∏—Ç–∏—á–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å (93.5%)
- üíé –ö–∞—á–µ—Å—Ç–≤–æ –≤–∞–∂–Ω–µ–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
- üéØ –°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- üìâ –ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
- ‚è±Ô∏è –î–æ–ø—É—Å—Ç–∏–º–∞ –≤—ã—Å–æ–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (11s)

### –§–∞–π–ª—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

**Without Reasoning:**
- –î–µ—Ç–∞–ª—å–Ω—ã–µ: `without_reasoning/results/squad_test_20251228_123452.jsonl`
- –°–≤–æ–¥–∫–∞: `without_reasoning/results/summary_20251228_123452.txt`

**Single-Step SO:**
- –î–µ—Ç–∞–ª—å–Ω—ã–µ: `with_structured_output/results/squad_so_20251228_124756.jsonl`
- –°–≤–æ–¥–∫–∞: `with_structured_output/results/summary_so_20251228_132602.txt`

**Two-Step SO:**
- –î–µ—Ç–∞–ª—å–Ω—ã–µ: `with_two_step_so/results/squad_two_step_so_20251228_135901.jsonl`
- –°–≤–æ–¥–∫–∞: `with_two_step_so/results/summary_two_step_so_20251228_162030.txt`

**ReAct (Function Calling):**
- –î–µ—Ç–∞–ª—å–Ω—ã–µ: `with_react/results/squad_reasoning_20251228_113451.jsonl`
- –°–≤–æ–¥–∫–∞: `with_react/results/summary_reasoning_20251228_122552.txt`

---

## üöÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –±–∏–∑–Ω–µ—Å-–∫–µ–π—Å–∞—Ö

### 1. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –ø–æ–¥—Ö–æ–¥

#### üíº Customer Support / FAQ Bot
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** Without Reasoning –∏–ª–∏ Single-Step SO

**–ü–æ—á–µ–º—É:**
- ‚ö° –ù—É–∂–Ω–∞ –Ω–∏–∑–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (2-6s)
- üí∞ –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ ‚Üí —ç–∫–æ–Ω–æ–º–∏—è –Ω–∞ API calls
- ‚úÖ –î–æ–ø—É—Å—Ç–∏–º–∞ —Ç–æ—á–Ω–æ—Å—Ç—å 89-91%
- üìä –ü—Ä–æ—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã —Å —è–≤–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏

**–ü—Ä–∏–º–µ—Ä:**
```python
# –ü—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è FAQ
response = client.chat.completions.create(
    model="qwen3-30b",
    messages=[
        {"role": "system", "content": "Answer based on FAQ context."},
        {"role": "user", "content": f"Context: {faq}\n\nQuestion: {question}"}
    ]
)
```

#### üè• Medical/Legal AI Assistant
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** Two-Step SO –∏–ª–∏ ReAct 2 Tools

**–ü–æ—á–µ–º—É:**
- üéØ –ö—Ä–∏—Ç–∏—á–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å (93%+)
- üíé –ö–∞—á–µ—Å—Ç–≤–æ –≤–∞–∂–Ω–µ–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
- üìã –ù—É–∂–Ω–∞ –ø—Ä–æ—Å–ª–µ–∂–∏–≤–∞–µ–º–æ—Å—Ç—å reasoning
- ‚öñÔ∏è –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –æ—à–∏–±–∫–∏ –≤—ã—Å–æ–∫–∞

**–ü—Ä–∏–º–µ—Ä:**
```python
# –®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è reasoning
reasoning_response = client.chat.completions.create(
    model="qwen3-30b",
    messages=[...],
    response_format={"type": "json_schema", "schema": reasoning_schema}
)

# –®–∞–≥ 2: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º reasoning
messages.append({"role": "assistant", "content": reasoning})
final_response = client.chat.completions.create(
    model="qwen3-30b",
    messages=messages
)
```

#### ü§ñ Autonomous Agents / Complex Workflows
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** ReAct 2 Tools

**–ü–æ—á–µ–º—É:**
- üîß –ù—É–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ tools
- üß† –ê–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω "–¥—É–º–∞—Ç—å" –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º
- üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π output –¥–ª—è pipeline
- üîÑ Reasoning –º–æ–∂–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å/–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å

**–ü—Ä–∏–º–µ—Ä:**
```python
tools = [
    {"name": "analyze_context", "parameters": {"reasoning": "..."}},
    {"name": "extract_answer", "parameters": {"answer": "..."}},
    {"name": "search_database", "parameters": {"query": "..."}},
]

# –ê–≥–µ–Ω—Ç —Å–∞–º —Ä–µ—à–∞–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
response = client.chat.completions.create(
    model="qwen3-30b",
    messages=messages,
    tools=tools
)
```

#### üìä Data Extraction / Document Processing
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** ReAct 2 Tools –∏–ª–∏ Two-Step SO

**–ü–æ—á–µ–º—É:**
- üéØ –ù—É–∂–Ω–∞ –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
- üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π output –∫—Ä–∏—Ç–∏—á–µ–Ω
- üîç Reasoning –ø–æ–º–æ–≥–∞–µ—Ç –≤ —Å–ª–æ–∂–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
- ‚öñÔ∏è –ë–∞–ª–∞–Ω—Å —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏ throughput

### 2. –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤

#### –ü–∞—Ç—Ç–µ—Ä–Ω 1: "Think Then Act"
```python
# –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ Two-Step SO (93.47% accuracy)
class ThinkThenActAgent:
    async def process(self, task):
        # 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º reasoning —á–µ—Ä–µ–∑ SO
        thinking = await self.generate_reasoning(task)
        
        # 2. –î–µ–π—Å—Ç–≤—É–µ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ reasoning (free-form)
        action = await self.decide_action(task, thinking)
        
        return action, thinking  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±–∞ –¥–ª—è –ø—Ä–æ—Å–ª–µ–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
- –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π review
- –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

#### –ü–∞—Ç—Ç–µ—Ä–Ω 2: "Tool-Based Reasoning"
```python
# –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ ReAct 2 Tools (93.27% accuracy)
class ToolBasedAgent:
    tools = [
        {"name": "analyze", "description": "Analyze the situation"},
        {"name": "decide", "description": "Make a decision"},
        {"name": "execute", "description": "Execute action"}
    ]
    
    async def process(self, task):
        # –ê–≥–µ–Ω—Ç —Å–∞–º –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å tools
        while not done:
            tool_call = await self.llm.call_tool(task, self.tools)
            result = await self.execute_tool(tool_call)
            task.add_context(result)
        
        return task.final_result
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
- –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã
- Multi-step workflows
- Complex decision making

#### –ü–∞—Ç—Ç–µ—Ä–Ω 3: "Fast Path with Reasoning Fallback"
```python
# –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –ø–æ–¥—Ö–æ–¥–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
class HybridAgent:
    async def process(self, task):
        # –ü—Ä–æ–±—É–µ–º –±—ã—Å—Ç—Ä—ã–π –ø—É—Ç—å (Without Reasoning)
        quick_answer = await self.quick_answer(task)
        confidence = self.estimate_confidence(quick_answer)
        
        if confidence > 0.95:
            return quick_answer  # 15 q/s
        
        # Fallback –Ω–∞ reasoning –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
        return await self.reasoning_answer(task)  # 3-4 q/s
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
- –í—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è costs
- Adaptive AI systems

### 3. –ë–æ—Ä—å–±–∞ —Å —Ç–∏–ø–∏—á–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏

#### –ü—Ä–æ–±–ª–µ–º–∞: "Too Long (Explanation)" - 44.8% –æ—à–∏–±–æ–∫ –±–µ–∑ reasoning

**–†–µ—à–µ–Ω–∏–µ 1:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ reasoning –ø–æ–¥—Ö–æ–¥—ã
```python
# ‚ùå –ü–ª–æ—Ö–æ: –º–æ–¥–µ–ª—å –¥–∞–µ—Ç –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
messages = [{"role": "user", "content": "Question: ..."}]

# ‚úÖ –•–æ—Ä–æ—à–æ: —Ä–∞–∑–¥–µ–ª—è–µ–º thinking –∏ answer
# –®–∞–≥ 1: –¥—É–º–∞–µ–º
# –®–∞–≥ 2: –æ—Ç–≤–µ—á–∞–µ–º –∫—Ä–∞—Ç–∫–æ
```

**–†–µ—à–µ–Ω–∏–µ 2:** –î–æ–±–∞–≤—å—Ç–µ constraint –≤ prompt
```python
system_prompt = """Extract ONLY the exact answer from context. 
No explanations. Maximum 5 words."""
```

#### –ü—Ä–æ–±–ª–µ–º–∞: "Partial Match" - 45-51% –æ—à–∏–±–æ–∫ —Å reasoning

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ post-processing
```python
def normalize_answer(answer: str, gold_answers: List[str]) -> str:
    """Normalize format to match expected answer."""
    # –£–±–∏—Ä–∞–µ–º –∞—Ä—Ç–∏–∫–ª–∏
    answer = re.sub(r'\b(the|a|an)\b', '', answer, flags=re.IGNORECASE)
    
    # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º —á–∏—Å–ª–∞: "5" ‚Üí "five" –µ—Å–ª–∏ –æ–∂–∏–¥–∞–µ—Ç—Å—è —Å–ª–æ–≤–æ
    if any(word.isalpha() for word in gold_answers[0].split()):
        answer = number_to_word(answer)
    
    # –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω—é—é –ø—É–Ω–∫—Ç—É–∞—Ü–∏—é
    answer = answer.strip('.,!?')
    
    return answer
```

#### –ü—Ä–æ–±–ª–µ–º–∞: JSON –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ Single-Step SO ("} 4", "} 7 {")

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Two-Step –∏–ª–∏ ReAct 2 Tools
```python
# ‚ùå –ü–ª–æ—Ö–æ: reasoning + answer –≤ –æ–¥–Ω–æ–º JSON
response_format = {
    "reasoning": "...",
    "answer": "..."  # ‚Üê –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
}

# ‚úÖ –•–æ—Ä–æ—à–æ: —Ä–∞–∑–¥–µ–ª—è–µ–º –Ω–∞ –¥–≤–∞ —à–∞–≥–∞
# –®–∞–≥ 1: JSON –¥–ª—è reasoning
# –®–∞–≥ 2: Free-form –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π tool –¥–ª—è answer
```

### 4. –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```python
class AgentMetrics:
    """–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è production –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞."""
    
    def track_performance(self, result):
        # 1. Accuracy –º–µ—Ç—Ä–∏–∫–∏
        self.accuracy = self.calculate_emin(result)
        
        # 2. Latency –º–µ—Ç—Ä–∏–∫–∏
        self.p50_latency = percentile(latencies, 50)
        self.p95_latency = percentile(latencies, 95)
        self.p99_latency = percentile(latencies, 99)
        
        # 3. Error –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∏–∑ –Ω–∞—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞)
        self.error_categories = {
            "partial_match": count,
            "wrong_answer": count,
            "too_long": count,
            "format_error": count
        }
        
        # 4. Cost –º–µ—Ç—Ä–∏–∫–∏
        self.cost_per_request = (
            prompt_tokens * INPUT_PRICE + 
            completion_tokens * OUTPUT_PRICE
        )
        
        # 5. Reasoning quality (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
        if result.reasoning:
            self.reasoning_length = len(result.reasoning)
            self.reasoning_relevance = self.score_relevance(result.reasoning)
```

### 5. A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

```python
class ABTestFramework:
    """Framework –¥–ª—è A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤."""
    
    approaches = {
        "baseline": WithoutReasoningAgent(),
        "single_step": SingleStepSOAgent(),
        "two_step": TwoStepSOAgent(),
        "react_1": ReActOneToolAgent(),
        "react_2": ReActTwoToolsAgent(),
    }
    
    async def route_request(self, user_id: str, task):
        # –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –≥—Ä—É–ø–ø–∞–º
        approach = self.get_approach_for_user(user_id)
        
        # –õ–æ–≥–∏—Ä—É–µ–º –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
        start = time.time()
        result = await approach.process(task)
        latency = time.time() - start
        
        self.log_metrics(
            approach=approach.name,
            user_id=user_id,
            accuracy=self.check_accuracy(result),
            latency=latency,
            cost=self.calculate_cost(result)
        )
        
        return result
```

### 6. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

| –ü–æ–¥—Ö–æ–¥ | Requests/min | Cost/1K req | Use Case |
|--------|--------------|-------------|----------|
| Without Reasoning | 900 (15 q/s) | $X | High-volume FAQ |
| Single-Step SO | 277 (4.6 q/s) | $1.5X | Moderate accuracy |
| Two-Step SO | 158 (2.6 q/s) | $2.5X | High accuracy critical |
| ReAct 1 Tool | 207 (3.4 q/s) | $2X | Balanced approach |
| ReAct 2 Tools | 199 (3.3 q/s) | $2.2X | Agent workflows |

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è costs:**
```python
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è reasoning
@cache(ttl=3600)
def get_reasoning(context: str, question: str):
    return generate_reasoning(context, question)

# Batch processing –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è overhead
async def process_batch(questions: List[str]):
    return await asyncio.gather(*[
        process_question(q) for q in questions
    ])
```

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install aiohttp rich datasets
```

## –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```bash
python download_squad.py
```

